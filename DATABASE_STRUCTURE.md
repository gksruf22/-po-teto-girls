# ğŸ“Š T-Chatbot ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

## í˜„ì¬ DB êµ¬ì¡° (H2 Database)

### 1ï¸âƒ£ **User (ì‚¬ìš©ì)**
```
Table: users
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Column      â”‚ Type         â”‚ Constraint  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id          â”‚ BIGINT       â”‚ PK, AI      â”‚
â”‚ email       â”‚ VARCHAR      â”‚ UNIQUE, NN  â”‚
â”‚ password    â”‚ VARCHAR      â”‚ NN          â”‚
â”‚ username    â”‚ VARCHAR      â”‚ NN          â”‚
â”‚ created_at  â”‚ TIMESTAMP    â”‚ NN          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Relationship: 1:N with ChatHistory
```

### 2ï¸âƒ£ **ChatHistory (ì±„íŒ… ê¸°ë¡)** â­ í•µì‹¬!
```
Table: chat_history
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Column          â”‚ Type         â”‚ Constraint  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id              â”‚ BIGINT       â”‚ PK, AI      â”‚
â”‚ user_id         â”‚ BIGINT       â”‚ FK, NN      â”‚
â”‚ user_message    â”‚ TEXT         â”‚ NN          â”‚
â”‚ bot_response    â”‚ TEXT         â”‚ NN          â”‚
â”‚ created_at      â”‚ TIMESTAMP    â”‚ NN          â”‚
â”‚ is_public       â”‚ BOOLEAN      â”‚ Default:0   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Relationship: N:1 with User
```

### 3ï¸âƒ£ **SharedChat (ì»¤ë®¤ë‹ˆí‹° ê³µìœ  ê²Œì‹œê¸€)**
```
Table: shared_chats
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Column          â”‚ Type         â”‚ Constraint  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id              â”‚ BIGINT       â”‚ PK, AI      â”‚
â”‚ user_id         â”‚ VARCHAR      â”‚ NN (email)  â”‚
â”‚ username        â”‚ VARCHAR      â”‚ NN          â”‚
â”‚ title           â”‚ VARCHAR(200) â”‚ NN          â”‚
â”‚ tags            â”‚ VARCHAR(500) â”‚             â”‚
â”‚ user_message    â”‚ VARCHAR(2000)â”‚ NN          â”‚
â”‚ bot_response    â”‚ VARCHAR(2000)â”‚ NN          â”‚
â”‚ created_at      â”‚ TIMESTAMP    â”‚ NN          â”‚
â”‚ likes           â”‚ INTEGER      â”‚ Default:0   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Note: User ì—”í‹°í‹°ì™€ ì§ì ‘ ì—°ê²° ì—†ìŒ (emailë¡œ ì°¸ì¡°)
```

### 4ï¸âƒ£ **ChatLike (ì¢‹ì•„ìš”)**
```
Table: chat_likes
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Column          â”‚ Type         â”‚ Constraint              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id              â”‚ BIGINT       â”‚ PK, AI                  â”‚
â”‚ shared_chat_id  â”‚ BIGINT       â”‚ NN                      â”‚
â”‚ user_id         â”‚ VARCHAR      â”‚ NN (email)              â”‚
â”‚ created_at      â”‚ TIMESTAMP    â”‚ NN                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Unique Constraint: (shared_chat_id, user_id)
```

### 5ï¸âƒ£ **Comment (ëŒ“ê¸€)**
```
Table: comments
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Column          â”‚ Type         â”‚ Constraint  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id              â”‚ BIGINT       â”‚ PK, AI      â”‚
â”‚ shared_chat_id  â”‚ BIGINT       â”‚ NN          â”‚
â”‚ user_id         â”‚ VARCHAR      â”‚ NN (email)  â”‚
â”‚ username        â”‚ VARCHAR      â”‚ NN          â”‚
â”‚ content         â”‚ VARCHAR(1000)â”‚ NN          â”‚
â”‚ created_at      â”‚ TIMESTAMP    â”‚ NN          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” í˜„ì¬ ìƒí™© ë¶„ì„

### âœ… ì´ë¯¸ êµ¬í˜„ëœ ê²ƒ
1. **ChatHistory í…Œì´ë¸”**: ì±„íŒ… ì €ì¥ ê¸°ëŠ¥ì˜ ë¼ˆëŒ€ëŠ” ì´ë¯¸ ì¡´ì¬!
   - Userì™€ N:1 ê´€ê³„ ì„¤ì •ë¨
   - user_message, bot_response ì €ì¥ ê°€ëŠ¥
   - is_public í•„ë“œë¡œ ê³µìœ  ì—¬ë¶€ ê´€ë¦¬ ê°€ëŠ¥

2. **Repository**: `ChatHistoryRepository` ì´ë¯¸ ì¡´ì¬
   - `findByUserIdOrderByCreatedAtDesc()`: ì‚¬ìš©ìë³„ ì±„íŒ… ì¡°íšŒ
   - `findByIsPublicTrueOrderByCreatedAtDesc()`: ê³µê°œ ì±„íŒ… ì¡°íšŒ

### âŒ ì•„ì§ êµ¬í˜„ë˜ì§€ ì•Šì€ ê²ƒ
1. **ChatControllerì—ì„œ ì‹¤ì œ ì €ì¥ ë¡œì§ ì—†ìŒ**
   - í˜„ì¬ëŠ” ë©”ì‹œì§€ ì£¼ê³ ë°›ê¸°ë§Œ í•¨
   - DBì— ì €ì¥í•˜ëŠ” ì½”ë“œê°€ ì—†ìŒ

2. **ì±„íŒ… ì„¸ì…˜/ë£¸ ê°œë… ì—†ìŒ**
   - í˜„ì¬ëŠ” ê°œë³„ ë©”ì‹œì§€ ë‹¨ìœ„ë§Œ ì €ì¥ ê°€ëŠ¥
   - ëŒ€í™” ì„¸ì…˜ì„ ê·¸ë£¹í™”í•˜ëŠ” ê°œë…ì´ ì—†ìŒ

3. **í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì±„íŒ… ëª©ë¡ ì¡°íšŒ ê¸°ëŠ¥ ì—†ìŒ**
   - ì‚¬ì´ë“œë°”ì— ì´ì „ ì±„íŒ… ëª©ë¡ í‘œì‹œ ê¸°ëŠ¥ ì—†ìŒ
   - ì €ì¥ëœ ì±„íŒ… ë¶ˆëŸ¬ì˜¤ê¸° ê¸°ëŠ¥ ì—†ìŒ

---

## ğŸ¯ ì±„íŒ… ì €ì¥ ê¸°ëŠ¥ êµ¬í˜„ì„ ìœ„í•œ ì œì•ˆ

### ì˜µì…˜ 1: ê°„ë‹¨í•œ ë°©ì‹ (í˜„ì¬ êµ¬ì¡° í™œìš©)
ê°œë³„ Q&A ë©”ì‹œì§€ë¥¼ ê°ê° ì €ì¥
- ì¥ì : ë¹ ë¥¸ êµ¬í˜„
- ë‹¨ì : ëŒ€í™”ì˜ ì—°ì†ì„± íŒŒì•… ì–´ë ¤ì›€

### ì˜µì…˜ 2: ì±„íŒ… ì„¸ì…˜ ë°©ì‹ (ê¶Œì¥) â­
ìƒˆë¡œìš´ `ChatSession` ì—”í‹°í‹° ì¶”ê°€
```
ChatSession (ì±„íŒ…ë°©/ëŒ€í™” ì„¸ì…˜)
â”œâ”€â”€ id
â”œâ”€â”€ user_id
â”œâ”€â”€ title (ìë™ìƒì„± ë˜ëŠ” ì‚¬ìš©ì ì§€ì •)
â”œâ”€â”€ mode (default/love/tbrainwash)
â”œâ”€â”€ created_at
â”œâ”€â”€ updated_at
â””â”€â”€ chat_messages (1:N)
    â””â”€â”€ ChatHistory
```

ì´ ë°©ì‹ìœ¼ë¡œ í•˜ë©´:
- ëŒ€í™”ë¥¼ ì„¸ì…˜ë³„ë¡œ ê·¸ë£¹í™”
- ì‚¬ì´ë“œë°”ì—ì„œ ì´ì „ ëŒ€í™” ëª©ë¡ í‘œì‹œ
- ëŒ€í™” ì´ì–´ê°€ê¸° ê°€ëŠ¥
- ê° ì„¸ì…˜ì˜ ì œëª© ìë™ ìƒì„± (ì²« ì§ˆë¬¸ ê¸°ë°˜)

ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?
